/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
    id 'com.github.johnrengelman.shadow' version '8.1.0'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {
    api libs.com.amazonaws.serverless.aws.serverless.java.container.springboot3
    api libs.org.springframework.boot.spring.boot.starter.web
    testImplementation libs.com.amazonaws.serverless.aws.serverless.java.container.core
    testImplementation libs.org.junit.jupiter.junit.jupiter
}

group = 'com.example'
version = '1.0-SNAPSHOT'
description = 'serverless-sample'
java.sourceCompatibility = '17'

// add dependencies into lib
tasks.register('copyDependencies', Copy) {
    into layout.buildDirectory.dir("dependencies").get().asFile
    from configurations.runtimeClasspath
}
//jar {
//    enabled = true
//    archiveClassifier = ''
//    finalizedBy shadowJar // 추가한 코드

//    manifest {
//        attributes 'Main-Class': 'com.example.Application'
//    }
//}
shadowJar {
    archiveBaseName.set('my-application')
    archiveClassifier.set('')
    archiveVersion.set('')
}

tasks.build {
    dependsOn shadowJar
}